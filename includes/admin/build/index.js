(()=>{"use strict";var e,t={406:(e,t,a)=>{const n=window.React,l=window.wp.element,r=window.wp.apiFetch;var c=a.n(r);const o=window.wp.components,s=()=>{const[e,t]=(0,l.useState)(null),[a,r]=(0,l.useState)(!0),[s,i]=(0,l.useState)("");return(0,l.useEffect)(()=>{c()({path:"novac/v1/settings"}).then(t).finally(()=>r(!1))},[]),a?(0,n.createElement)(o.Spinner,null):(0,n.createElement)(o.Card,null,(0,n.createElement)(o.CardBody,null,(0,n.createElement)(o.TextControl,{label:"Public Key",value:e.public_key,onChange:a=>t({...e,public_key:a}),help:"Your Novac public API key"}),(0,n.createElement)(o.TextControl,{label:"Secret Key",type:"password",value:e.secret_key,onChange:a=>t({...e,secret_key:a}),help:"Your Novac secret API key"}),(0,n.createElement)(o.SelectControl,{label:"Mode",value:e.mode,options:[{label:"Test",value:"test"},{label:"Live",value:"live"}],onChange:a=>t({...e,mode:a}),help:"Select test mode for development or live mode for production"}),(0,n.createElement)(o.TextControl,{label:"Webhook URL",value:e.webhook_url,disabled:!0,help:"Configure this URL in your Novac dashboard"}),(0,n.createElement)(o.Button,{variant:"primary",onClick:async()=>{r(!0),i("");try{const a=await c()({path:"novac/v1/settings",method:"POST",data:e});t(a),i("✅ Settings saved successfully.")}catch(e){i("❌ Failed to save settings.")}finally{r(!1)}},disabled:a},a?"Saving...":"Save Settings"),s&&(0,n.createElement)(o.Notice,{status:s.includes("✅")?"success":"error",isDismissible:!0,onRemove:()=>i("")},s)))},i=()=>{const[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(!0),[s,i]=(0,l.useState)(1),[u,m]=(0,l.useState)(0),[v,d]=(0,l.useState)(""),[p,E]=(0,l.useState)(""),h=async()=>{r(!0);try{const e=new URLSearchParams({page:s,per_page:20});v&&e.append("search",v),p&&e.append("status",p);const a=await c()({path:`novac/v1/transactions?${e}`});t(a.items||[]),m(a.total||0)}catch(e){console.error(e)}finally{r(!1)}};if((0,l.useEffect)(()=>{h()},[s,p]),a&&0===e.length)return(0,n.createElement)(o.Spinner,null);const b=Math.ceil(u/20);return(0,n.createElement)(o.Card,null,(0,n.createElement)(o.CardBody,null,(0,n.createElement)("div",{className:"novac-transactions-header"},(0,n.createElement)("div",{className:"novac-search-bar"},(0,n.createElement)(o.TextControl,{placeholder:"Search by email, name, or reference...",value:v,onChange:d}),(0,n.createElement)(o.Button,{variant:"primary",onClick:()=>{i(1),h()}},"Search")),(0,n.createElement)("div",{className:"novac-status-filter"},(0,n.createElement)(o.SelectControl,{label:"Status",value:p,options:[{label:"All Statuses",value:""},{label:"Successful",value:"successful"},{label:"Pending",value:"pending"},{label:"Failed",value:"failed"}],onChange:E}))),a&&(0,n.createElement)(o.Spinner,null),!a&&0===e.length&&(0,n.createElement)(o.Notice,{status:"info",isDismissible:!1},"No transactions found."),!a&&e.length>0&&(0,n.createElement)("div",{className:"novac-transactions-table"},(0,n.createElement)("table",null,(0,n.createElement)("thead",null,(0,n.createElement)("tr",null,(0,n.createElement)("th",null,"Reference"),(0,n.createElement)("th",null,"Customer"),(0,n.createElement)("th",null,"Amount"),(0,n.createElement)("th",null,"Status"),(0,n.createElement)("th",null,"Date"))),(0,n.createElement)("tbody",null,e.map(e=>{return(0,n.createElement)("tr",{key:e.id},(0,n.createElement)("td",null,(0,n.createElement)("code",null,e.transaction_ref)),(0,n.createElement)("td",null,(0,n.createElement)("div",null,(0,n.createElement)("strong",null,e.customer_name||"N/A")),(0,n.createElement)("div",{style:{fontSize:"12px",color:"#666"}},e.customer_email)),(0,n.createElement)("td",null,(0,n.createElement)("strong",null,(t=e.amount,a=e.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:a||"NGN"}).format(t)))),(0,n.createElement)("td",null,(e=>{const t={success:"#28a745",successful:"#28a745",pending:"#ffc107",failed:"#dc3545"}[e]||"#6c757d";return(0,n.createElement)("span",{style:{padding:"4px 12px",borderRadius:"12px",backgroundColor:t,color:"white",fontSize:"12px",fontWeight:"600",textTransform:"uppercase"}},e)})(e.status)),(0,n.createElement)("td",null,new Date(e.created_at).toLocaleString()));var t,a}))),b>1&&(0,n.createElement)("div",{className:"novac-pagination"},(0,n.createElement)(o.Button,{variant:"secondary",disabled:s<=1,onClick:()=>i(s-1)},"Previous"),(0,n.createElement)("span",null,"Page ",s," of ",b," (",u," total)"),(0,n.createElement)(o.Button,{variant:"secondary",disabled:s>=b,onClick:()=>i(s+1)},"Next")))))};wp.element.render((0,n.createElement)(()=>{const e=window.novacData?.page||"novac-settings";return(0,n.createElement)("div",{className:"novac-admin"},(0,n.createElement)("div",{className:"novac-header"},(0,n.createElement)("h1",null,"💳 Novac Payments"),(0,n.createElement)("p",{className:"novac-subtitle"},"Manage your payment gateway settings and transactions")),(0,n.createElement)("nav",{className:"nav-tab-wrapper"},(0,n.createElement)("a",{href:"?page=novac-settings",className:"nav-tab "+("novac-settings"===e?"nav-tab-active":"")},"Settings"),(0,n.createElement)("a",{href:"?page=novac-transactions",className:"nav-tab "+("novac-transactions"===e?"nav-tab-active":"")},"Transactions")),(0,n.createElement)("div",{className:"novac-content"},"novac-settings"===e&&(0,n.createElement)(s,null),"novac-transactions"===e&&(0,n.createElement)(i,null)))},null),document.getElementById("novac-admin-root"))}},a={};function n(e){var l=a[e];if(void 0!==l)return l.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,l,r)=>{if(!a){var c=1/0;for(u=0;u<e.length;u++){for(var[a,l,r]=e[u],o=!0,s=0;s<a.length;s++)(!1&r||c>=r)&&Object.keys(n.O).every(e=>n.O[e](a[s]))?a.splice(s--,1):(o=!1,r<c&&(c=r));if(o){e.splice(u--,1);var i=l();void 0!==i&&(t=i)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,l,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var l,r,[c,o,s]=a,i=0;if(c.some(t=>0!==e[t])){for(l in o)n.o(o,l)&&(n.m[l]=o[l]);if(s)var u=s(n)}for(t&&t(a);i<c.length;i++)r=c[i],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},a=globalThis.webpackChunknovac=globalThis.webpackChunknovac||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=n.O(void 0,[350],()=>n(406));l=n.O(l)})();